<!doctype html>
<html>
<head><meta charset="utf-8"><title>Groviq Admin - Orders</title></head>
<body>
<h1>Groviq Admin - Orders</h1>
<label>Base URL: <input id="base" value="https://your-site.com"></label><br>
<label>CK: <input id="ck" value=""></label><br>
<label>CS: <input id="cs" value=""></label><br>
<button onclick="loadOrders()">Load Orders</button>
<div id="orders"></div>
<script>
async function loadOrders(){
  const base = document.getElementById('base').value;
  const ck = document.getElementById('ck').value;
  const cs = document.getElementById('cs').value;
  const res = await fetch(base + '/wp-json/wc/v3/orders?per_page=50&consumer_key=' + ck + '&consumer_secret=' + cs);
  const list = await res.json();
  const container = document.getElementById('orders');
  container.innerHTML = '';
  list.forEach(o=>{
    const div = document.createElement('div');
    div.style.border='1px solid #ccc'; div.style.padding='8px'; div.style.margin='6px';
    div.innerHTML = '<b>Order #' + o.id + '</b><br>Status: ' + o.status + '<br>Items: ' + o.line_items.map(li=> li.name + ' x' + li.quantity).join(', ');
    const assign = document.createElement('input'); assign.placeholder='Rider ID (phone)';
    const btn = document.createElement('button'); btn.textContent='Assign';
    btn.onclick = async ()=> {
      const body = { meta_data: [{ key: 'rider_assigned', value: assign.value }] };
      const resp = await fetch(base + '/wp-json/wc/v3/orders/' + o.id + '?consumer_key=' + ck + '&consumer_secret=' + cs, {
        method: 'PUT', headers: {'Content-Type':'application/json'}, body: JSON.stringify(body)
      });
      if(resp.ok) alert('Assigned'); else alert('Failed');
    };
    div.appendChild(document.createElement('br'));
    div.appendChild(assign);
    div.appendChild(btn);
    container.appendChild(div);
  });
}
</script>
</body>
</html>
